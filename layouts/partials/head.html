<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="{{ .Site.Params.description }}">
<meta name="author" content="{{ .Site.Params.author }}">

<title>{{ if .Title }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>

{{ $style := resources.Get "scss/main.scss" | resources.ToCSS (dict
    "targetPath" "css/main.css"
    "outputStyle" "expanded"
    "enableSourceMap" (eq hugo.Environment "development")
) }}

{{ if eq hugo.Environment "production" }}
    {{ $style = $style | minify | fingerprint "sha512" }}
{{ end }}

<link rel="stylesheet" href="{{ $style.RelPermalink }}" {{ if eq hugo.Environment "production" }}integrity="{{ $style.Data.Integrity }}"{{ end }}>

<link rel="icon" href="/favicon.ico" type="image/x-icon">

<script>
    (function() {
        const savedTheme = localStorage.getItem('theme');
        const theme = savedTheme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
    })();
</script>

{{ partial "head/mixpanel.html" . }}

<!-- Add this in the head -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" media="print" onload="this.media='all'">
<!-- Fallback for JS disabled browsers -->
<noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap">
</noscript>